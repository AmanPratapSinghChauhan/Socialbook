{"ast":null,"code":"import _slicedToArray from\"C:/Users/91863/OneDrive/Desktop/Socialbook/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:/Users/91863/OneDrive/Desktop/Socialbook/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/91863/OneDrive/Desktop/Socialbook/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect,useState}from'react';import Header from'../../Components/Header';import{server}from'../../store';import axios from'axios';import'./Friends.css';import{useSelector}from'react-redux';import{useDispatch}from'react-redux';import{follow}from'../../actions/UserActions';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Friends=function Friends(){var _useSelector=useSelector(function(state){return state.user;}),user=_useSelector.user;var dispatch=useDispatch();var navigate=useNavigate();var userID=user._id;var userFollowers=user.following;var handleFollow=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(friendId){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:console.log(friendId);dispatch(follow(friendId,userID));navigate('/friends');case 3:case\"end\":return _context.stop();}},_callee);}));return function handleFollow(_x){return _ref.apply(this,arguments);};}();var friendBox=function friendBox(friend){return/*#__PURE__*/_jsxs(\"div\",{className:\"fb-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fb-item\",children:[/*#__PURE__*/_jsx(\"img\",{src:'http://localhost:4000/Images/'+friend.image}),/*#__PURE__*/_jsx(\"span\",{children:friend.name})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fb-item\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return handleFollow(friend._id);},children:\"Follow\"})})]});};var _useState=useState([]),_useState2=_slicedToArray(_useState,2),friends=_useState2[0],setFriends=_useState2[1];useEffect(function(){axios.get(\"\".concat(server,\"/getallusers\")).then(function(res){if(res.data.status){var nluser=res.data.allusers.filter(function(auser){return!auser._id.includes(userID);});var nfuser=nluser.filter(function(nuser){return!userFollowers.some(function(follower){return nuser._id.includes(follower);});});console.log(nfuser);setFriends(nfuser);}}).catch(function(error){console.log(error);});},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{className:\"friend-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"friend-box\",children:friends.map(friendBox)})})]});};export default Friends;","map":{"version":3,"names":["React","useEffect","useState","Header","server","axios","useSelector","useDispatch","follow","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Friends","_useSelector","state","user","dispatch","navigate","userID","_id","userFollowers","following","handleFollow","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","friendId","wrap","_callee$","_context","prev","next","console","log","stop","_x","apply","arguments","friendBox","friend","className","children","src","image","name","type","onClick","_useState","_useState2","_slicedToArray","friends","setFriends","get","concat","then","res","data","status","nluser","allusers","filter","auser","includes","nfuser","nuser","some","follower","catch","error","map"],"sources":["C:/Users/91863/OneDrive/Desktop/Socialbook/my-app/src/Pages/Friends/Friends.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Header from '../../Components/Header';\r\nimport { server } from '../../store';\r\nimport axios from 'axios';\r\nimport './Friends.css';\r\nimport { useSelector } from 'react-redux';\r\nimport { useDispatch } from 'react-redux';\r\nimport { follow } from '../../actions/UserActions';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Friends = () => {\r\n    const {user}=useSelector((state)=>state.user);\r\n    const dispatch=useDispatch();\r\n    const navigate=useNavigate();\r\n    const userID=user._id;\r\n    const userFollowers=user.following;\r\n\r\n    const handleFollow=async (friendId)=>{\r\n        console.log(friendId);\r\n         dispatch(follow(friendId,userID));\r\n         navigate('/friends');\r\n    }\r\n    const friendBox=(friend)=>{\r\n        return (\r\n        <div className='fb-container'>\r\n        <div className='fb-item'>\r\n           <img src={'http://localhost:4000/Images/'+friend.image}/><span>{friend.name}</span>\r\n        </div>\r\n        <div className='fb-item'>\r\n           <button type='button' onClick={()=>handleFollow(friend._id)}>Follow</button>\r\n        </div>\r\n\r\n        </div>\r\n      \r\n\r\n        )\r\n    }\r\n    const [friends,setFriends]=useState([]);\r\n    useEffect(()=>{\r\n       \r\n       axios.get(`${server}/getallusers`).then(\r\n            (res)=>{\r\n                if(res.data.status){\r\n                    var nluser=res.data.allusers.filter((auser)=>!auser._id.includes(userID));\r\n                   var nfuser= nluser.filter((nuser) =>!userFollowers.some((follower) => nuser._id.includes(follower)));\r\n                   console.log(nfuser);\r\n                    setFriends(nfuser);\r\n                }\r\n                \r\n            }\r\n        ).catch((error)=>{\r\n              console.log(error);\r\n        })\r\n    },[]);\r\n    \r\n  return (\r\n    <>\r\n        <Header/>\r\n        <div className='friend-container'>\r\n        <div className='friend-box'>\r\n            {friends.map(friendBox)}\r\n            </div>\r\n        </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Friends;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}