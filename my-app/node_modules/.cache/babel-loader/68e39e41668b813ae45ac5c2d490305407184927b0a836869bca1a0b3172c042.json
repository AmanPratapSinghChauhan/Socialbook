{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/91863/OneDrive/Desktop/Socialbook/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/91863/OneDrive/Desktop/Socialbook/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/91863/OneDrive/Desktop/Socialbook/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useSelector}from'react-redux';import{server}from'../store';import axios from'axios';import'./Postcard.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PostCard=function PostCard(props){var _useSelector=useSelector(function(state){return state.user;}),user=_useSelector.user;var _useState=useState(props.postInfo.likes),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var handleLike=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(index){var userId,postId,_yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:userId=user._id;postId=index;_context.next=4;return axios.post(\"\".concat(server,\"/like\"),{userId:userId,postId:postId});case 4:_yield$axios$post=_context.sent;data=_yield$axios$post.data;if(data.status){setData(data.likes);}case 7:case\"end\":return _context.stop();}},_callee);}));return function handleLike(_x){return _ref.apply(this,arguments);};}();var handleUnlike=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(index){var userId,postId,_yield$axios$post2,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:userId=user._id;postId=index;_context2.next=4;return axios.post(\"\".concat(server,\"/unlike\"),{userId:userId,postId:postId});case 4:_yield$axios$post2=_context2.sent;data=_yield$axios$post2.data;if(data.status){setData(data.likes);}case 7:case\"end\":return _context2.stop();}},_callee2);}));return function handleUnlike(_x2){return _ref2.apply(this,arguments);};}();var path='http://localhost:4000/Images/'+props.postInfo.image;var userpath='http://localhost:4000/Images/'+props.postInfo.profilepic;return/*#__PURE__*/_jsx(\"div\",{className:\"p-c-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-c-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pc-item\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"p-c-pic\",src:userpath}),/*#__PURE__*/_jsx(\"span\",{children:props.postInfo.name})]}),/*#__PURE__*/_jsx(\"div\",{className:\"pc-item\",children:/*#__PURE__*/_jsx(\"p\",{children:props.postInfo.description})}),/*#__PURE__*/_jsx(\"div\",{className:\"pc-item\",children:/*#__PURE__*/_jsx(\"img\",{className:\"p-c-img\",src:path})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pc-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"like-button\",children:data.includes(user._id)?/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-thumbs-down\",onClick:function onClick(){return handleUnlike(props.postInfo._id);},\"aria-hidden\":\"true\"}):/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-thumbs-o-up\",onClick:function onClick(){return handleLike(props.postInfo._id);},\"aria-hidden\":\"true\"})}),/*#__PURE__*/_jsx(\"span\",{children:data.length})]})]})});};export default PostCard;","map":{"version":3,"names":["React","useEffect","useState","useSelector","server","axios","jsx","_jsx","jsxs","_jsxs","PostCard","props","_useSelector","state","user","_useState","postInfo","likes","_useState2","_slicedToArray","data","setData","handleLike","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","index","userId","postId","_yield$axios$post","wrap","_callee$","_context","prev","next","_id","post","concat","sent","status","stop","_x","apply","arguments","handleUnlike","_ref2","_callee2","_yield$axios$post2","_callee2$","_context2","_x2","path","image","userpath","profilepic","className","children","src","name","description","includes","class","onClick","length"],"sources":["C:/Users/91863/OneDrive/Desktop/Socialbook/my-app/src/Components/PostCard.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { server } from '../store';\r\nimport axios from 'axios';\r\nimport './Postcard.css';\r\n\r\n\r\nconst PostCard = (props) => {\r\n  const {user}=useSelector((state)=>state.user);\r\n  const [data,setData]=useState(props.postInfo.likes);\r\n\r\n    const handleLike=async (index)=>{\r\n          var userId=user._id;\r\n          var postId=index;\r\n          const {data}=await axios.post(`${server}/like`,{\r\n           userId,postId\r\n          });\r\n          if(data.status){\r\n             setData(data.likes);\r\n          }    \r\n    }\r\n    const handleUnlike=async (index)=>{\r\n      var userId=user._id;\r\n          var postId=index;\r\n          const {data}=await axios.post(`${server}/unlike`,{\r\n           userId,postId\r\n          });\r\n          if(data.status){\r\n             setData(data.likes);\r\n          }   \r\n\r\n    }\r\n\r\n\r\n    var path='http://localhost:4000/Images/'+props.postInfo.image;\r\n    var userpath='http://localhost:4000/Images/'+props.postInfo.profilepic;\r\n    \r\n  return (\r\n    <div className='p-c-container'>\r\n\r\n    <div className='p-c-box'>\r\n     <div className='pc-item'>\r\n        <img className='p-c-pic' src={userpath} /><span>{props.postInfo.name}</span> \r\n     </div>\r\n     <div className='pc-item'>\r\n        <p>{props.postInfo.description}</p>\r\n\r\n     </div>\r\n     <div className='pc-item'>\r\n        <img className='p-c-img' src={path}/>\r\n     </div>\r\n     <div className='pc-item'>\r\n     <span className='like-button'  >\r\n     {data.includes(user._id)\r\n     ?\r\n     <i class=\"fa fa-thumbs-down\" onClick={()=>handleUnlike(props.postInfo._id)} aria-hidden=\"true\"></i>\r\n     :\r\n     <i class=\"fa fa-thumbs-o-up\" onClick={()=>handleLike(props.postInfo._id)} aria-hidden='true'></i>\r\n     \r\n     }\r\n     \r\n     \r\n     </span>\r\n     <span>\r\n      {data.length}\r\n     </span>\r\n      \r\n     </div>\r\n\r\n    </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PostCard;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}