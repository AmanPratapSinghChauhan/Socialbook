{"ast":null,"code":"import _slicedToArray from\"C:/Users/91863/OneDrive/Desktop/Socialbook/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import ReactDOM from'react-dom/client';import'./Message.css';import axios from'axios';import{useSelector}from'react-redux/es/hooks/useSelector';import Header from'../../Components/Header';import{server}from'../../store';import Userchat from'../../Components/UserChats/Userchat';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var root=ReactDOM.createRoot(document.getElementById('chat-right'));var Message=function Message(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setDatas=_useState2[1];var _useSelector=useSelector(function(state){return state.user;}),user=_useSelector.user;var userID=user._id;var userFollowers=user.followers;useEffect(function(){axios.get(\"\".concat(server,\"/getallusers\")).then(function(res){var nluser=res.data.allusers.filter(function(auser){return!auser._id.includes(userID);});var nfuser=nluser.filter(function(nuser){return userFollowers.some(function(follower){return nuser._id.includes(follower);});});setDatas(nfuser);});});var handleChat=function handleChat(chatUser){root.render(/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Userchat,{chatId:chatUser,userId:user._id})}));};var followerCreater=function followerCreater(data){return/*#__PURE__*/_jsxs(\"div\",{className:\"l-s-item\",onClick:function onClick(){return handleChat(data._id);},children:[/*#__PURE__*/_jsx(\"img\",{src:'http://localhost:4000/Images/'+data.image}),/*#__PURE__*/_jsx(\"span\",{children:data.name})]});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{className:\"for-header\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-left\",children:data.map(followerCreater)}),/*#__PURE__*/_jsx(\"div\",{id:\"chat-right\"})]})]});};export default Message;","map":{"version":3,"names":["React","useState","useEffect","ReactDOM","axios","useSelector","Header","server","Userchat","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","root","createRoot","document","getElementById","Message","_useState","_useState2","_slicedToArray","data","setDatas","_useSelector","state","user","userID","_id","userFollowers","followers","get","concat","then","res","nluser","allusers","filter","auser","includes","nfuser","nuser","some","follower","handleChat","chatUser","render","children","chatId","userId","followerCreater","className","onClick","src","image","name","map","id"],"sources":["C:/Users/91863/OneDrive/Desktop/Socialbook/my-app/src/Pages/Messenger/Message.js"],"sourcesContent":["import React, { useState,useEffect } from 'react';\r\nimport  ReactDOM  from 'react-dom/client';\r\nimport './Message.css';\r\nimport axios from 'axios';\r\nimport { useSelector } from 'react-redux/es/hooks/useSelector';\r\nimport Header from '../../Components/Header';\r\nimport { server } from '../../store';\r\nimport Userchat from '../../Components/UserChats/Userchat';\r\nconst root=ReactDOM.createRoot(document.getElementById('chat-right'));\r\n\r\nconst Message = () => {\r\n    const [data,setDatas]=useState([]);\r\n    const {user}=useSelector((state)=>state.user);\r\n    const userID=user._id;\r\n    const userFollowers=user.followers;\r\n\r\n\r\n    useEffect(()=>{\r\n        axios.get(`${server}/getallusers`).then((res)=>{\r\n          var nluser=res.data.allusers.filter((auser)=>!auser._id.includes(userID));\r\n          var nfuser= nluser.filter((nuser) =>userFollowers.some((follower) => nuser._id.includes(follower)));\r\n          setDatas(nfuser);\r\n        });\r\n      });\r\n      const handleChat=  (chatUser)=>{\r\n\r\n        root.render(<div><Userchat chatId={chatUser} userId={user._id}/></div>);\r\n              \r\n      }\r\n\r\n      const followerCreater=(data)=>{\r\n        return(\r\n          <div className='l-s-item' onClick={()=>handleChat(data._id)}>\r\n          <img src={'http://localhost:4000/Images/'+data.image}/><span>{data.name}</span>\r\n         </div>\r\n        )\r\n  }\r\n  return (\r\n    <>\r\n        <Header/>\r\n        <div className='for-header'>\r\n\r\n        </div>\r\n        <div className='chat-page'>\r\n           <div className='chat-left'>\r\n                {data.map(followerCreater)}\r\n           </div>\r\n           <div id='chat-right'>\r\n\r\n           </div>\r\n\r\n        </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Message;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}